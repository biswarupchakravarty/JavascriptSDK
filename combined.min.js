var global;
(function(){global="undefined"==typeof window?process:window;global.Appacitive||(global.Appacitive={runtime:{isNode:"undefined"!=typeof process,isBrowser:"undefined"!=typeof window}});"undefined"!=typeof module&&"undefined"!=typeof module.exports&&(exports=global.Appacitive);var e=function(a){if(!a||!a.send||"function"!=typeof a.send)throw Error("No applicable httpTransport class found");a.onResponse=this.onResponse;var b=[],c={},k=0,e={},m=0;this.addProcessor=function(a){if(a){a.pre=a.pre||function(){};
a.post=a.post||function(){};var b=a.pre;k+=1;c[k]=b;a=a.post;m+=1;e[m]=a}};this.enqueueRequest=function(a){b.push(a)};this.notify=function(){if(0!==b.length){var k=[],m;for(m in e)e.hasOwnProperty(m)&&k.push(e[m]);for(;0<b.length;){var f=b.shift(),p=[];for(m in c)c.hasOwnProperty(m)&&p.push(c[m](f));a.send(f,k,p)}}};this.onResponse=function(a){console.dir(a)}},f=function(){var a=function(){throw Error("Not Implemented Exception");};this.inOnline=this.send=a;this.onResponse=function(){a()};this.onError=
function(){a()}},c=function(){var a=new f;a.type="jQuery based http provider";a.send=function(a,d,e){"function"==typeof a.beforeSend&&a.beforeSend(a);switch(a.method.toLowerCase()){case "get":$.ajax({url:a.url,type:"GET",async:a.async,beforeSend:function(b){for(var d=0;d<a.headers.length;d+=1)b.setRequestHeader(a.headers[d].key,a.headers[d].value)},success:function(l){try{l=JSON.parse(l)}catch(f){}b(l,d,e);c.onResponse(l,a)},error:function(){c.onError(a)}});break;case "post":$.ajax({url:a.url,type:"POST",
async:a.async,contentType:"application/json",data:JSON.stringify(a.data),beforeSend:function(b){for(var d=0;d<a.headers.length;d+=1)b.setRequestHeader(a.headers[d].key,a.headers[d].value)},success:function(l){try{l=JSON.parse(l)}catch(f){}b(l,d,e);c.onResponse(l,a)},error:function(){c.onError(a)}});break;case "put":$.ajax({url:a.url,type:"PUT",contentType:"application/json",data:JSON.stringify(a.data),async:a.async,beforeSend:function(b){for(var d=0;d<a.headers.length;d+=1)b.setRequestHeader(a.headers[d].key,
a.headers[d].value)},success:function(l){try{l=JSON.parse(l)}catch(f){}b(l,d,e);c.onResponse(l,a)},error:function(){c.onError(a)}});break;case "delete":$.ajax({url:a.url,type:"DELETE",async:a.async,beforeSend:function(b){for(var d=0;d<a.headers.length;d+=1)b.setRequestHeader(a.headers[d].key,a.headers[d].value)},success:function(l){try{l=JSON.parse(l)}catch(f){}b(l,d,e);c.onResponse(l,a)},error:function(){c.onError(a)}});break;default:throw Error("Unrecognized http method: "+a.method);}};a.isOnline=
function(){return window.navigator.onLine||!0};var b=function(a,b,d){if(b.length!=d.length)throw Error("Callback length and state length mismatch!");for(var c=0;c<b.length;c+=1)b[c].apply({},[a,d[c]])},c=a;$=$||{};$.ajax=$.ajax||{};return a},a=function(){var a=new f;a.type="Http provider for nodejs";a.send=function(a,d,e){"function"==typeof a.beforeSend&&a.beforeSend(a);switch(a.method.toLowerCase()){case "get":$.ajax({url:a.url,type:"GET",async:a.async,beforeSend:function(b){for(var d=0;d<a.headers.length;d+=
1)b.setRequestHeader(a.headers[d].key,a.headers[d].value)},success:function(l){try{l=JSON.parse(l)}catch(f){}b(l,d,e);c.onResponse(l,a)},error:function(){c.onError(a)}});break;case "post":$.ajax({url:a.url,type:"POST",async:a.async,contentType:"application/json",data:JSON.stringify(a.data),beforeSend:function(b){for(var d=0;d<a.headers.length;d+=1)b.setRequestHeader(a.headers[d].key,a.headers[d].value)},success:function(f){try{f=JSON.parse(f)}catch(n){}b(f,d,e);c.onResponse(f,a)},error:function(){c.onError(a)}});
break;case "put":$.ajax({url:a.url,type:"PUT",contentType:"application/json",data:JSON.stringify(a.data),async:a.async,beforeSend:function(b){for(var d=0;d<a.headers.length;d+=1)b.setRequestHeader(a.headers[d].key,a.headers[d].value)},success:function(f){try{f=JSON.parse(f)}catch(n){}b(f,d,e);c.onResponse(f,a)},error:function(){c.onError(a)}});break;case "delete":$.ajax({url:a.url,type:"DELETE",async:a.async,beforeSend:function(b){for(var d=0;d<a.headers.length;d+=1)b.setRequestHeader(a.headers[d].key,
a.headers[d].value)},success:function(f){try{f=JSON.parse(f)}catch(n){}b(f,d,e);c.onResponse(f,a)},error:function(){c.onError(a)}});break;default:throw Error("Unrecognized http method: "+a.method);}};a.isOnline=function(){return!0};var b=function(a,b,d){if(b.length!=d.length)throw Error("Callback length and state length mismatch!");for(var c=0;c<b.length;c+=1)b[c].apply({},[a,d[c]])},c=a;$=$||{};$.ajax=$.ajax||{};return a};global.Appacitive.http=new function(){var b=global.Appacitive.runtime.isBrowser?
new c:new a,j=new e(b),h=!1;this.pause=function(){h=!0};this.unpause=function(){h=!1};this.addProcessor=function(a){var b=Error('Must provide a processor object with either a "pre" function or a "post" function.');if(!a)throw b;if(!a.pre&&!a.post)throw b;j.addProcessor(a)};this.send=function(a){j.enqueueRequest(a);b.isOnline()&&!1==h&&j.notify()};this.flush=function(a){a?j.notify():b.isOnline()&&j.notify()};this.onError=function(a){if(a.onError)if(a.context)a.onError.apply(a.context,[]);else a.onError()};
b.onError=this.onError;this.onResponse=function(a,b){if(b.onSuccess)if(b.context)b.onSuccess.apply(b.context,[a]);else b.onSuccess(a)};b.onResponse=this.onResponse};global.Appacitive.HttpRequest=function(){this.url="";this.data={};this.async=!0;this.headers=[];this.method="GET"};global.Appacitive&&global.Appacitive.http&&global.Appacitive.http.addProcessor({pre:function(){return(new Date).getTime()},post:function(a,b){var c=(new Date).getTime()-b;a._timeTakenInMilliseconds=c}});var b=global;b.Appacitive&&
b.Appacitive.http&&b.Appacitive.http.addProcessor({pre:function(a){return a},post:function(a,c){b.Appacitive.session.isSessionValid(a)||(null!=b.Appacitive.session.get()&&(b.Appacitive.session.resetSession(),b.Appacitive.session.onSessionCreated=function(){b.Appacitive.http.unpause();b.Appacitive.http.flush();b.Appacitive.session.onSessionCreated=function(){}},b.Appacitive.session.recreate(),b.Appacitive.http.pause()),b.Appacitive.http.send(c))}})})();
for(var t=0;0<t--;){var req1=new Appacitive.HttpRequest;req1.url="https://apis.appacitive.com/sessionservice.svc/getGraph?rawData=true&from=-1hours&target=stats.pgossamer.account{0}.application1918338163933441.deployment10938369762787624.success";req1.method="get";req1.headers=[{key:"appacitive-session",value:"BxqkdySwptR0C5iaJfWXd2+6bkWYtEmMYuPC77odDXE="},{key:"appacitive-environment",value:"sandbox"}];req1.onSuccess=function(e){console.dir(e)};req1.onError=function(){console.log("error occured")};
Appacitive.http.send(req1)}
(function(e){String.format=function(c,a){if(1>=arguments.length)return c;for(var b=arguments.length-2,d=0;d<=b;d++)c=c.replace(RegExp("\\{"+d+"\\}","gi"),arguments[d+1]);return c};String.prototype.toPascalCase=function(){return this.charAt(0).toUpperCase()+this.slice(1)};String.prototype.trimChar=function(c){var a=RegExp("^"+c),b=this;a.test(b)&&(b=b.slice(1,b.length));a=RegExp(c+"$");a.test(b)&&(b=b.slice(0,-1));return b};String.toSearchString=function(c){"undefined"==typeof c&&(c="");for(var a=
"",b=0;b<c.length;b+=1)-1==" .,;#".indexOf(c[b])&&(a+=c[b]);return a=a.toLowerCase()};String.contains=function(c,a){return-1!=c.indexOf(a)};String.startsWith=function(c,a){return 0==c.indexOf(a)};e.dateFromWcf=function(c,a){var b=/Date\(([^)]+)\)/.exec(c);if(2!=b.length){if(!a)return s;throw Error(s+" is not .net json date.");}return new Date(parseFloat(b[1]))};var f=function(){e.Appacitive.bag=e.Appacitive.bag||{};e.Appacitive.bag.accountName=e.Appacitive.bag.accountName||{};e.Appacitive.bag.selectedType=
e.Appacitive.bag.selectedType||{};e.Appacitive.bag.apps=e.Appacitive.bag.apps||{};e.Appacitive.bag.apps.selected=e.Appacitive.bag.apps.selected||{};e.Appacitive.bag.apps.selected.name=e.Appacitive.bag.apps.selected.name||{};e.Appacitive.bag.selectedCatalog=e.Appacitive.bag.selectedCatalog||{};e.Appacitive.bag.selectedCatalog.Id=e.Appacitive.bag.selectedCatalog.Id||0;e.Appacitive.bag.selectedCatalog.blueprintid=e.Appacitive.bag.selectedCatalog.blueprintid||0;e.Appacitive.bag.selectedCatalog.BlueprintId=
e.Appacitive.bag.selectedCatalog.BlueprintId||0;e.Appacitive.models=e.Appacitive.models||{};e.Appacitive.models.deploymentCollection=e.Appacitive.models.deploymentCollection||{};e.Appacitive.models.deploymentCollection.deployments=e.Appacitive.models.deploymentCollection.deployments||{};var c=(e.Appacitive.config||{apiBaseUrl:""}).apiBaseUrl;c.lastIndexOf("/")==c.length-1&&(c=c.substring(0,c.length-1));this.session={sessionServiceUrl:c+"/sessionservice",getCreateSessionUrl:function(a){return String.format("{0}/create?deploymentName={1}",
this.sessionServiceUrl,a)},getPingSessionUrl:function(){return String.format("{0}/ping",this.sessionServiceUrl)},getValidateTokenUrl:function(a){return String.format("{0}/validatetoken?token={1}",this.sessionServiceUrl,a)},getDeleteSessionUrl:function(a){return String.format("{0}/delete?deploymentName={1}",this.sessionServiceUrl,a)}};this.email={emailServiceUrl:"email",getSendEmailUrl:function(){return String.format("{0}/send",this.emailServiceUrl)}};this.identity={identityServiceUrl:c+"/accountservice",
getUpdateUserUrl:function(){return String.format("{0}/updateuser",this.identityServiceUrl)},getUserUrl:function(a){return String.format("{0}/user/{1}",this.identityServiceUrl,a)},getChangePasswordUrl:function(){return String.format("{0}/changepwd",this.identityServiceUrl)},getUploadUrl:function(a){return String.format("{0}/file/{1}",this.identityServiceUrl,a)}};this.user={userServiceUrl:c+"/user",getCreateUserUrl:function(){return String.format("{0}/create",this.userServiceUrl)},getAuthenticateUserUrl:function(){return String.format("{0}/authenticate",
this.userServiceUrl)},getUpdateUserUrl:function(a){return String.format("{0}/{1}",this.userServiceUrl,a)},getUserUrl:function(a){return String.format("{0}/{1}",this.userServiceUrl,a)},getUserDeleteUrl:function(a){return String.format("{0}/{1}",this.userServiceUrl,a)},getSearchAllUrl:function(a,b,d){a="";a=String.format("{0}/search/user/all",(new f).article.articleServiceUrl);a=d?a+"?psize="+d:a+"?psize=10";if("undefined"!==typeof b&&0<b.length)for(d=0;d<b.length;d+=1)0!=b[d].trim().length&&(a=a+"&"+
b[d]);return a},getGetAllLinkedAccountsUrl:function(a){return String.format("{0}/{1}/linkedaccounts",this.userServiceUrl,a)}};this.application={applicationServiceUrl:c+"/applicationservice",getSearchAllUrl:function(a){var b=String.format("{0}/find/{1}/all",this.applicationServiceUrl,e.Appacitive.bag.accountName);if("undefined"!==typeof a&&0<a.length)for(var d=0;d<a.length;d+=1)0<a[d].trim().length&&(b=b+"&"+a[d]);return b},getCreateUrl:function(){return String.format("{0}/create",this.applicationServiceUrl)},
getCreateSessionUrl:function(a){return String.format("{0}/session?appName={1}",this.applicationServiceUrl,a)},getDeleteUrl:function(a){return String.format("{0}/{1}",this.applicationServiceUrl,a)},getCheckNameUrl:function(a){return String.format("{0}/doesNameExist/{1}/{2}",this.applicationServiceUrl,e.Appacitive.bag.accountName,a)},getHasAppUrl:function(){return String.format("{0}/hasApp",this.applicationServiceUrl)},getGetPublishStatusUrl:function(a){return String.format("{0}/status/{1}",this.applicationServiceUrl,
a)},getGetUrl:function(a){return String.format("{0}/{1}",this.applicationServiceUrl,a)},getGenerateKeyUrl:function(a){return String.format("{0}/generatekey/{1}",this.applicationServiceUrl,a)},getUpdateKeyStatusUrl:function(a){return String.format("{0}/updatekey/{1}",this.applicationServiceUrl,a)},getUpdateApplicationUrl:function(a){return String.format("{0}/{1}",this.applicationServiceUrl,a)},getDeleteApiKey:function(a){return String.format("{0}/deletekey/{1}",this.applicationServiceUrl,a)},getUploadUrl:function(){return String.format("{0}/file/",
this.applicationServiceUrl)}};this.article={articleServiceUrl:c+"article",getExportUrl:function(a,b){return"Articles.exp?ctype=Article&blueprintid="+a+"&type="+b},getEntityId:function(){return e.Appacitive.bag.selectedCatalog.id},getGetUrl:function(a,b){return String.format("{0}/{1}/{2}",this.articleServiceUrl,a,b)},getMultiGetUrl:function(a,b,d){return String.format("{0}/multiGet/{1}/{2}",this.articleServiceUrl,b,d)},getMultiDeleteUrl:function(a,b){return String.format("{0}/multidelete/{1}",this.articleServiceUrl,
b)},getBlobUploadUrl:function(){return String.format("{0}/blob/upload",this.articleServiceUrl)},getBlobUpdateUrl:function(a){return String.format("{0}/blob/update?&articleid={1}",this.articleServiceUrl,a)},getSearchAllUrl:function(a,b,d,c){a="";a=String.format("{0}/search/{1}/all",this.articleServiceUrl,b);a=c?a+"?psize="+c:a+"?psize=10";if("undefined"!==typeof d&&0<d.length)for(b=0;b<d.length;b+=1)0!=d[b].trim().length&&(a=a+"&"+d[b]);return a},getProjectionQueryUrl:function(){return String.format("{0}/search/project",
this.articleServiceUrl)},getPropertiesSearchUrl:function(a,b,d){a=String.format("{0}/search/{1}/all",this.articleServiceUrl,b);return a+("?properties="+d)},getDeleteUrl:function(a,b){return String.format("{0}/{1}/{2}?verbose=true&debug=true",this.articleServiceUrl,a,b)},getCreateUrl:function(a){return String.format("{0}/{1}",this.articleServiceUrl,a)},getUpdateUrl:function(a,b){return String.format("{0}/{1}/{2}",this.articleServiceUrl,a,b)},getDownloadUrl:function(a){return String.format("article.file?fileurl="+
escape(a))}};this.catalog={catalogServiceUrl:c+"/blueprintservice",getSearchAllUrl:function(a){var b=String.format("{0}/find/all?",this.catalogServiceUrl),b=b+"?psize=1000";if("undefined"!==typeof a&&0<a.length)for(var d=0;d<a.length;d+=1)0!=a[d].trim().length&&(b=b+"&"+a[d]);return b},getPropertiesSearchUrl:function(a,b,d){a=String.format("{0}/search/{1}/{2}/all",this.articleServiceUrl,a,b);return a+("?properties="+d)},getDeleteUrl:function(a,b,d){return String.format("{0}/delete/{1}/{2}/{3}",this.articleServiceUrl,
a,b,d)},getCreateUrl:function(a){return String.format("{0}/create/{1}",this.articleServiceUrl,a)},getUpdateUrl:function(a,b){return String.format("{0}/update/{1}/{2}",this.articleServiceUrl,a,b)}};this.connection={connectionServiceUrl:c+"connection",getEntityId:function(){return e.Appacitive.bag.selectedCatalog.id},getGetUrl:function(a,b){return String.format("{0}/{1}/{2}",this.connectionServiceUrl,a,b)},getCreateUrl:function(a){return String.format("{0}/{1}",this.connectionServiceUrl,a)},getUpdateUrl:function(a,
b,d){return String.format("{0}/update/{1}/{2}",this.connectionServiceUrl,b,d)},getDeleteUrl:function(a,b){return String.format("{0}/{1}/{2}",this.connectionServiceUrl,a,b)},getMultiDeleteUrl:function(a,b){return String.format("{0}/multidelete/{1}",this.connectionServiceUrl,b)},getSearchByArticleUrl:function(a,b,d,c,e){a="";a=String.format("{0}/{1}/find/all?label={2}&articleid={3}",this.connectionServiceUrl,b,c,d);if("undefined"!==typeof e&&0<e.length)for(b=0;b<e.length;b+=1)a=a+"&"+e[b];return a},
getConnectedArticles:function(a,b,d,c){a="";a=String.format("{0}/{1}/{2}/find",this.connectionServiceUrl,b,d);if(c&&c.length&&0<c.length)for(b=0;b<c.length;b+=1)a=0==b?a+("?"+c[b]):a+("&"+c[b]);return a},getInterconnectsUrl:function(){var a="";return a=String.format("{0}/connectedarticles",this.connectionServiceUrl)},getPropertiesSearchUrl:function(a,b,d){a=String.format("{0}/{1}/find/all",this.connectionServiceUrl,b);return a+("?properties="+d)}};this.schema={schemaServiceUrl:c+"/schemaservice",
getEntityId:function(){return"deployment"==e.Appacitive.bag.selectedType?e.Appacitive.bag.selectedCatalog.blueprintid:e.Appacitive.bag.selectedCatalog.id},getExportUrl:function(a){return"Schemas.exp?ctype=Schema&blueprintid="+a},getSearchAllUrl:function(a,b){var d="";a&&(d=String.format("{0}/find/all/{1}",this.schemaServiceUrl,a));d+="?psize=200";if("undefined"!==typeof b&&0<b.length)for(var c=0;c<b.length;c+=1)d=d+"&"+b[c];return d},getGetPropertiesUrl:function(a){return String.format("{0}/get/{1}/{2}/true",
this.schemaServiceUrl,this.getEntityId(),a)},getCreateUrl:function(){return String.format("{0}/create/{1}",this.schemaServiceUrl,this.getEntityId())},getDeleteUrl:function(a){return String.format("{0}/delete/{1}/{2}",this.schemaServiceUrl,this.getEntityId(),a)},getUpdateUrl:function(a){return String.format("{0}/update/{1}/{2}",this.schemaServiceUrl,this.getEntityId(),a)},getUpdateAttributesUrl:function(a){return String.format("{0}/updateAttributes/{1}/{2}",this.schemaServiceUrl,this.getEntityId(),
a)},getAddPropertyUrl:function(a){return String.format("{0}/addProperty/{1}/{2}",this.schemaServiceUrl,this.getEntityId(),a)},getDeletePropertyUrl:function(a,b){return String.format("{0}/deleteProperty/{1}/{2}/{3}",this.schemaServiceUrl,this.getEntityId(),a,b)},getUpdatePropertyUrl:function(a){return String.format("{0}/updateProperty/{1}/{2}",this.schemaServiceUrl,this.getEntityId(),a)},getGetUrl:function(a){return String.format("{0}/get/{1}/{2}",this.schemaServiceUrl,"blueprint"==e.Appacitive.bag.selectedType?
e.Appacitive.bag.selectedCatalog.Id:e.Appacitive.bag.selectedCatalog.BlueprintId,a)}};this.relation={relationServiceUrl:c+"/relationservice",getEntityId:function(){return"deployment"==e.Appacitive.bag.selectedType?e.Appacitive.bag.selectedCatalog.blueprintid:e.Appacitive.bag.selectedCatalog.id},getExportUrl:function(a){return"Relations.exp?ctype=Relation&blueprintid="+a},getSearchBySchemaUrl:function(a,b,d){var c="",c=String.format("{0}/{1}/find/{2}",this.relationServiceUrl,a,b),c=c+"?psize=200";
if("undefined"!==typeof d&&0<d.length)for(a=0;a<d.length;a+=1)c=c+"&"+d[a];return c},getSearchAllUrl:function(a,b){var d="";a&&(d=String.format("{0}/find/all/{1}",this.relationServiceUrl,a));d+="?psize=200";if("undefined"!==typeof b&&0<b.length)for(var c=0;c<b.length;c+=1)d=d+"&"+b[c];return d},getGetPropertiesUrl:function(a){return String.format("{0}/get/{1}/{2}/true",this.relationServiceUrl,this.getEntityId(),a)},getCreateUrl:function(){return String.format("{0}/create/{1}",this.relationServiceUrl,
this.getEntityId())},getDeleteUrl:function(a){return String.format("{0}/delete/{1}/{2}",this.relationServiceUrl,this.getEntityId(),a)},getUpdateUrl:function(a){return String.format("{0}/update/{1}/{2}",this.relationServiceUrl,this.getEntityId(),a)},getUpdateAttributesUrl:function(a){return String.format("{0}/updateAttributes/{1}/{2}",this.relationServiceUrl,this.getEntityId(),a)},getAddPropertyUrl:function(a){return String.format("{0}/addProperty/{1}/{2}",this.relationServiceUrl,this.getEntityId(),
a)},getDeletePropertyUrl:function(a,b){return String.format("{0}/deleteProperty/{1}/{2}/{3}",this.relationServiceUrl,this.getEntityId(),a,b)},getUpdatePropertyUrl:function(a){return String.format("{0}/updateProperty/{1}/{2}",this.relationServiceUrl,this.getEntityId(),a)},getUpdateEndPointUrl:function(a,b){return String.format("{0}/updateEndpoint/{1}/{2}/{3}",this.relationServiceUrl,this.getEntityId(),a,b)},getGetUrl:function(a){return String.format("{0}/get/{1}/{2}",this.relationServiceUrl,"blueprint"==
e.Appacitive.bag.selectedType?e.Appacitive.bag.selectedCatalog.Id:e.Appacitive.bag.selectedCatalog.BlueprintId,a)}};this.cannedList={cannedListServiceUrl:c+"/listservice",getEntityId:function(){return"deployment"==e.Appacitive.bag.selectedType?e.Appacitive.bag.selectedCatalog.blueprintid:e.Appacitive.bag.selectedCatalog.id},getExportUrl:function(a){return"CannedLists.exp?ctype=List&blueprintid="+a},getListItemExportUrl:function(a,b){return"CannedLists.exp?ctype=ListItems&blueprintid="+a+"&type="+
b},getSearchAllUrl:function(a,b){var d="";a&&(d=String.format("{0}/find/all/{1}",this.cannedListServiceUrl,a));d+="?psize=200";if("undefined"!==typeof b&&0<b.length)for(var c=0;c<b.length;c+=1)d=d+"&"+b[c];return d},getGetItemsUrl:function(a){return String.format("{0}/get/{1}/{2}",this.cannedListServiceUrl,this.getEntityId(),a)},getCreateUrl:function(){return String.format("{0}/create/{1}",this.cannedListServiceUrl,this.getEntityId())},getDeleteUrl:function(a){return String.format("{0}/delete/{1}/{2}",
this.cannedListServiceUrl,this.getEntityId(),a)},getSearchListItemsUrl:function(a,b){var c=String.format("{0}/searchListItems/{1}/{2}",this.cannedListServiceUrl,this.getEntityId(),a);if("undefined"!==typeof b&&0<b.length){for(var c=c+"?",e=0;e<b.length;e+=1)c=c+b[e]+"&";c=c.substring(0,c.length-1)}return c},getUpdateListItemPositionUrl:function(a,b,c){return String.format("{0}/updateListItemPosition/{1}/{2}/{3}/{4}",this.cannedListServiceUrl,this.getEntityId(),a,b,c)},getDeleteListItemUrl:function(a,
b){return String.format("{0}/removeListItem/{1}/{2}/{3}",this.cannedListServiceUrl,this.getEntityId(),a,b)},getAddListItemsUrl:function(a){return String.format("{0}/addListItems/{1}/{2}",this.cannedListServiceUrl,this.getEntityId(),a)},getUpdateListItemUrl:function(a,b){return String.format("{0}/updateListItem/{1}/{2}/{3}",this.cannedListServiceUrl,this.getEntityId(),a,b)},getUpdateUrl:function(a){return String.format("{0}/update/{1}/{2}",this.cannedListServiceUrl,this.getEntityId(),a)},getGetUrl:function(a){return String.format("{0}/get/{1}/{2}",
this.cannedListServiceUrl,"blueprint"==e.Appacitive.bag.selectedType?e.Appacitive.bag.selectedCatalog.Id:e.Appacitive.bag.selectedCatalog.BlueprintId,a)}};this.catalog={catalogServiceUrl:c+"/blueprintservice",getSearchAllUrl:function(a){var b=String.format("{0}/find/all?",this.catalogServiceUrl),b=b+"?psize=1000";if("undefined"!==typeof a&&0<a.length)for(var c=0;c<a.length;c+=1)b=b+"&"+a[c];return b}};this.blueprint={blueprintServiceUrl:c+"/blueprintservice",getGetUrl:function(a){return String.format("{0}/get/{1}",
this.blueprintServiceUrl,a)},getDeleteUrl:function(a){return String.format("{0}/delete/{1}",this.blueprintServiceUrl,a)},getCreateUrl:function(){return String.format("{0}/create",this.blueprintServiceUrl)},getSchemasUrl:function(a){a=String.format("{0}/getSchemas/{1}?",this.blueprintServiceUrl,a);return a+"?psize=1000"},getRelationsUrl:function(a){a=String.format("{0}/{1}/contents/relations?",this.blueprintServiceUrl,a);return a+"?psize=1000"},getCannedListsUrl:function(a){a=String.format("{0}/{1}/contents/lists?",
this.blueprintServiceUrl,a);return a+"?psize=1000"}};this.deployment={deploymentServiceUrl:c+"/deploymentservice",getGetUrl:function(a){return String.format("{0}/get/{1}",this.deploymentServiceUrl,a)},getGetPublishStatusUrl:function(a){return String.format("{0}/status/{1}",this.deploymentServiceUrl,a)},getCreateUrl:function(){return String.format("{0}/create",this.deploymentServiceUrl)},getFetchAllDeploymentsUrl:function(){return String.format("{0}/fetchAll",this.deploymentServiceUrl)},getSearchAllSchemaUrl:function(a){a=
String.format("{0}/getSchemas/{1}",this.deploymentServiceUrl,a);return a+"?psize=1000"},getSearchAllRelationsUrl:function(a){a=String.format("{0}/getRelations/{1}",this.deploymentServiceUrl,a);return a+"?psize=1000"},getSearchAllListsUrl:function(a){a=String.format("{0}/getLists/{1}",this.deploymentServiceUrl,a);return a+"?psize=1000"},getExportUrl:function(a,b){return String.format("{0}/{1}/{2}",this.deploymentServiceUrl,a,b)},getMergeUrl:function(a,b){return String.format("{0}/{1}/{2}",this.deploymentServiceUrl,
a,b)},getUpdateDeployemntUrl:function(a){return String.format("{0}/{1}",this.deploymentServiceUrl,a)},getProfilerUrl:function(a){return String.format("{0}/profile/{1}?deploymentid={2}",this.deploymentServiceUrl,a,e.Appacitive.bag.selectedCatalog.id)},getLiveToStageUrl:function(){var a=e.Appacitive.models.deploymentCollection.deployments.filter(function(a){return a.name.toLowerCase()==e.Appacitive.bag.apps.selected.name.toLowerCase()})[0].id;return a=String.format("{0}/Execute/{1}/mergelivetosandbox?livedeploymentid={2}",
this.deploymentServiceUrl,"__Sandbox_"+e.Appacitive.bag.apps.selected.name,a)}};this.tag={tagServiceUrl:c+"/tagsservice",getEntityId:function(){return"deployment"==e.Appacitive.selectedType?e.Appacitive.bag.selectedCatalog.blueprintid:e.Appacitive.bag.selectedCatalog.id},getAddTagUrl:function(a,b,c,e){return String.format("{0}/addTag/{1}/{2}/{3}/{4}?tag={5}",this.tagServiceUrl,this.getEntityId(),a,b,c,e)},getRemoveTagUrl:function(a,b,c,e){return String.format("{0}/removeTag/{1}/{2}/{3}/{4}?tag={5}",
this.tagServiceUrl,this.getEntityId(),a,b,c,e)}};this.invoice={invoiceServiceUrl:c+"/invoiceservice",getUsageStatsUrl:function(){return this.invoiceServiceUrl+"/usage/"+e.Appacitive.bag.accountName}};this.account={accountServiceUrl:c+"/accountservice",getCreateNewAccountUrl:function(a){return String.format("{0}/createaccount?skipValid={1}",this.accountServiceUrl,a)},getAccountIdUrl:function(a){return this.accountServiceUrl+"/accountId/"+a},checkAccountNameUrl:function(a){return this.accountServiceUrl+
"/exists/"+a},createInvite:function(a){return String.format("{0}/createInvite?args={1}",this.accountServiceUrl,a)},requestInvite:function(){return this.accountServiceUrl+"/createtoken"},checkToken:function(a,b){return String.format("{0}/searchToken/{1}?skipValid={2}",this.accountServiceUrl,a,b)},isHuman:function(a,b){return this.accountServiceUrl+"/captcha/"+a+"/"+b}};this.query={params:function(a){var b=[];return""==location.search||-1==location.search.indexOf("?")?b:a?(a=a.toLowerCase(),location.search.split("?")[1].split("&").forEach(function(c,
e){var h=e.split("="),f=h[1];2<h.length&&h.forEach(function(a){0==a||1==a||(f=f+"="+h[a])});h[0].toLowerCase()==a&&(b=[h[0],f])}),b):location.search.split("?")[1].split("=")}};this.announcement={announcementServiceUrl:c+"/announcementservice",getSummaryUrl:function(){return this.announcementServiceUrl+"/summary"}};this.graphite={graphiteBaseUrl:c+"/sessionservice/getGraph",getBaseUrl:function(){return this.graphiteBaseUrl}};this.emailtemplate={emailTemplateServiceUrl:c+"/emailservice",getCreateUrl:function(){return this.emailTemplateServiceUrl+
"/create"},getUpdateUrl:function(a){return this.emailTemplateServiceUrl+"/"+a},getAllNames:function(){return this.emailTemplateServiceUrl+"/find/all"},getSearchByNameUrl:function(a){return this.emailTemplateServiceUrl+"/"+a},getDeleteUrl:function(a){return this.emailTemplateServiceUrl+"/"+a}}};e.Appacitive.storage=e.Appacitive.storage||{};e.Appacitive.storage.urlFactory=new f})(global);
(function(e){e.Appacitive.eventManager=new function(){var e={};this.subscribe=function(c,a){if("string"!=typeof c||"function"!=typeof a)throw Error("Incorrect subscription call");"undefined"==typeof e[c]&&(e[c]=[]);var b;b=function(){return Math.floor(65536*Math.random()).toString(16)};b=b()+b()+"-"+b()+"-"+b()+"-"+b()+"-"+b()+b()+b();e[c].push({callback:a,id:b});return b};this.unsubscribe=function(c){if(!c)return!1;var a=-1,b=null,d;for(d in e)for(var j=0;j<e[d].length;j+=1)if(e[d][j].id==c){a=j;
b=d;break}return-1!=a?(e[b].splice(a,1),!0):!1};this.fire=function(c,a,b){if("string"!=typeof c)throw Error("Incorrect fire call");if("undefined"==typeof b||null===b)b={};b.eventName=c;console&&(console.log&&"function"==typeof console.log)&&console.log(c+" fired");if("undefined"!=typeof e.all)for(var d=0;d<e.all.length;d+=1)e.all[d].callback(a,b);d=function(a,b,c){setTimeout(function(){a(b,c)},0)};if("undefined"!=typeof e[c])for(var j=0;j<e[c].length;j+=1)d(e[c][j].callback,a,b)};this.clearSubscriptions=
function(c){if("string"!=typeof c)throw Error("Event Name must be string in EventManager.clearSubscriptions");e[c]&&(e[c].length=0);return this};this.clearAndSubscribe=function(c,a){this.clearSubscriptions(c);this.subscribe(c,a)};this.dump=function(){console.dir(e)}}})(global);(function(e){e.Appacitive.config={apiBaseUrl:"https://apis.appacitive.com/"}})(global);
(function(e){e.Appacitive.session=new function(){var f=function(){this.apikey="";this.isnonsliding=!1;this.usagecount=-1;this.windowtime=240},c=null,a=null;this.onSessionCreated=function(){};this.recreate=function(){e.Appacitive.session.create(a)};this.create=function(b){if(null===c){a=b=b||{};var d=new f;d.apikey=b.apikey||"";d.isnonsliding=b.isnonsliding||d.isnonsliding;d.usagecount=b.usagecount||d.usagecount;d.windowtime=b.windowtime||d.windowtime;b=new Appacitive.HttpRequest;b.url=e.Appacitive.config.apiBaseUrl+
"application.svc/session";b.method="put";b.data=d;b.onSuccess=function(a){a&&a.status&&"200"==a.status.code?(c=a.session.sessionkey,e.Appacitive.eventManager.fire("session.success",{},a),e.Appacitive.http.addProcessor({pre:function(a){a.headers.push({key:"appacitive-session",value:c})}}),e.Appacitive.session.onSessionCreated()):e.Appacitive.eventManager.fire("session.error",{},a)};e.Appacitive.http.send(b)}};var b=null,d=!1;e.Appacitive.http.addProcessor({pre:function(a){!0===d&&(1==a.headers.filter(function(a){return"appacitive-user-auth"==
a.key}).length?a.headers.forEach(function(a){"appacitive-user-auth"==a.key&&(a.value=b)}):a.headers.push({key:"appacitive-user-auth",value:b}))}});this.setUserAuthHeader=function(a){d=!0;b=a};this.removeUserAuthHeader=function(){d=!1};this.isSessionValid=function(a){if(!a)return!0;if(a.status){if(a.status.code&&("8027"==a.status.code||"8002"==a.status.code))return!1}else if(a.code&&("8027"==a.code||"8002"==a.code))return!1;return!0};this.resetSession=function(){c=null};this.get=function(){return c};
var j="sandbox";this.__defineGetter__("environment",function(){return j});this.__defineSetter__("environment",function(a){"sandbox"!=a&&"live"!=a&&(a="sandbox");j=a})}})(global);(function(e){e.Appacitive&&e.Appacitive.http&&e.Appacitive.http.addProcessor({pre:function(f){f.headers.push({key:"appacitive-environment",value:e.Appacitive.session.environment})}})})(global);
(function(e){e.Appacitive.queries={};var f=function(a){a=a||{};this.pageNumber=a.pageNumber||1;this.pageSize=a.pageSize||200};f.prototype.toString=function(){return"psize="+this.pageSize+"&pnum="+this.pageNumber};var c=function(a){a=a||{};this.orderBy=a.orderBy||"__UtcLastUpdatedDate";this.isAscending="undefined"==typeof a.isAscending?!1:a.isAscending};c.prototype.toString=function(){return"orderBy="+this.orderBy+"&isAsc="+this.isAscending};var a=function(a){var d=a||{};this.pageQuery=new f(a);this.sortQuery=
new c(a);this.type=a.type||"article";this.baseType=a.schema||a.relation;this.filter="";this.extendOptions=function(a){for(var b in a)d[b]=a[b];this.pageQuery=new f(d);this.sortQuery=new c(d)};this.setFilter=function(a){this.filter=a};this.toUrl=function(){var a=e.Appacitive.config.apiBaseUrl+this.type+".svc/"+this.baseType+"/find/all?"+this.pageQuery.toString()+"&"+this.sortQuery.toString();0<this.filter.trim().length&&(a+="&query="+this.filter);return a}};e.Appacitive.queries.SearchAllQuery=function(b){b=
b||{};var c=new a(b);this.toRequest=function(){var a=new e.Appacitive.HttpRequest;a.url=c.toUrl();a.method="get";return a};this.extendOptions=function(){c.extendOptions.apply(c,arguments)};this.getOptions=function(){var a={},b;for(b in c)c.hasOwnProperty(b)&&"function"!=typeof c[b]&&(a[b]=c[b]);return a}};e.Appacitive.queries.BasicFilterQuery=function(b){b=b||{};var c=new a(b);this.toRequest=function(){var a=new e.Appacitive.HttpRequest;a.url=c.toUrl()+"&properties="+b.filter+"&query="+b.filter;a.method=
"get";return a};this.extendOptions=function(){c.extendOptions.apply(c,arguments)};this.getOptions=function(){var a={},b;for(b in c)c.hasOwnProperty(b)&&"function"!=typeof c[b]&&(a[b]=c[b]);return a}};e.Appacitive.queries.GraphQuery=function(b){b=b||{};var c=new a(b);this.toRequest=function(){var a=new e.Appacitive.HttpRequest;a.url=e.Appacitive.config.apiBaseUrl;a.url+=e.Appacitive.storage.urlFactory.article.getProjectionQueryUrl();a.method="post";a.data=b.graphQuery;return a};this.extendOptions=
function(){c.extendOptions.apply(c,arguments)};this.getOptions=function(){var a={},b;for(b in c)c.hasOwnProperty(b)&&"function"!=typeof c[b]&&(a[b]=c[b]);return a}};e.Appacitive.queries.ConnectedArticlesQuery=function(b){b=b||{};var c=new a(b);this.toRequest=function(){var a=new e.Appacitive.HttpRequest;a.url=e.Appacitive.config.apiBaseUrl+"connection/"+b.relation+"/"+b.articleId+"/find?"+c.pageQuery.toString()+"&"+c.sortQuery.toString();return a};this.extendOptions=function(){c.extendOptions.apply(c,
arguments)};this.setFilter=function(){c.setFilter.apply(c,arguments)};this.getOptions=function(){var a={},b;for(b in c)c.hasOwnProperty(b)&&"function"!=typeof c[b]&&(a[b]=c[b]);return a}}})(global);
(function(e){e.Appacitive.BaseObject=function(f){_snapshot=null;var c=f=f||{};this.fetch=function(a,b){a=a||function(){};b=b||function(){};if(c.__id){var f=this,k=e.Appacitive.config.apiBaseUrl+e.Appacitive.storage.urlFactory[this.type].getGetUrl(c.__schematype||c.__relationtype,c.__id),g=new e.Appacitive.HttpRequest;g.url=k;g.method="get";g.onSuccess=function(e){if(e&&e.article){_snapshot=e.article;c.__id=e.article.__id;for(var g in e.article)"undefined"==typeof c[g]&&(c[g]=e.article[g]);f.___collection&&
"article"==f.___collection.collectionType&&f.___collection.addToCollection(f);a()}else b()};e.Appacitive.http.send(g)}else b()};this.del=function(a,b,f){a=a||function(){};b=b||function(){};f=f||{};if(c.__id){var k=this,g=e.Appacitive.config.apiBaseUrl,g=g+e.Appacitive.storage.urlFactory[this.type].getDeleteUrl(c.__schematype||c.__relationtype,c.__id);c&&(c.__schematype&&"user"==c.__schematype.toLowerCase())&&(g=e.Appacitive.config.apiBaseUrl,g+=e.Appacitive.storage.urlFactory.user.getUserDeleteUrl(c.__id));
f.deleteConnections&&!0===f.deleteConnections&&(g=-1==g.indexOf("?")?g+"?deleteconnections=true":g+"&deleteconnections=true");f=new e.Appacitive.HttpRequest;f.url=g;f.method="delete";f.onSuccess=function(e){"200"==e.code?(k.___collection&&k.___collection.removeById(c.__id),a()):b()};f.beforeSend=function(a){console.log("DELETE: "+a.url)};e.Appacitive.http.send(f)}else this.___collection.removeByCId(this.__cid),a()};this.getArticle=function(){return c};this.attributes=function(){if(0===arguments.length)return c.__attributes||
(c.__attributes={}),c.__attributes;if(1==arguments.length)return c.__attributes||(c.__attributes={}),c.__attributes[arguments[0]];if(2==arguments.length)c.__attributes||(c.__attributes={}),c.__attributes[arguments[0]]=arguments[1];else throw Error(".attributes() called with an incorrect number of arguments. 0, 1, 2 are supported.");};this.aggregates=function(){var a={},b;for(b in c){if(!c.hasOwnProperty(b))return;"$"==b[0]&&(a[b]=c[b])}if(0===arguments.length)return a;if(1==arguments.length)return a[arguments[0]];
throw Error(".aggregates() called with an incorrect number of arguments. 0, and 1 are supported.");};this.get=function(a){if(a)return c[a]};this.set=function(a,b){a&&(c[a]=b);return b};this.save=function(d,e){c.__id?a.apply(this,arguments):b.apply(this,arguments)};var a=function(a,b){var f=!1,k=JSON.parse(JSON.stringify(_snapshot)),g;for(g in c)"undefined"==typeof c[g]||null===c[g]?(k[g]=null,f=!0):c[g]!=_snapshot[g]?(k[g]=c[g],f=!0):c[g]==_snapshot[g]&&delete k[g];f&&(f=new e.Appacitive.HttpRequest,
f.url=e.Appacitive.config.apiBaseUrl+e.Appacitive.storage.urlFactory[this.type].getUpdateUrl(c.__schematype||c.__relationtype,_snapshot.__id),f.method="post",f.data=k,f.onSuccess=function(c){c&&(c.article||c.connection||c.user)?(_snapshot=c.article,"function"==typeof a&&a()):"function"==typeof b&&b()},e.Appacitive.http.send(f))},b=function(a,b){var f=this,k=e.Appacitive.config.apiBaseUrl+e.Appacitive.storage.urlFactory[this.type].getCreateUrl(c.__schematype||c.__relationtype);c.__schematype&&"user"==
c.__schematype.toLowerCase()&&(k=e.Appacitive.config.apiBaseUrl+e.Appacitive.storage.urlFactory.user.getCreateUserUrl());var g=new e.Appacitive.HttpRequest;g.url=k;g.method="put";g.data=c;g.onSuccess=function(e){var g=null;e&&(g=e.article||e.connection||e.user);if(e&&g){_snapshot=g;c.__id=g.__id;for(var k in g)"undefined"==typeof c[k]&&(c[k]=g[k]);f.connectionCollections&&0<f.connectionCollections.length&&f.connectionCollections.forEach(function(a){a.getQuery().extendOptions({articleId:c.__id})});
"function"==typeof a&&a()}else"function"==typeof b&&b()};e.Appacitive.http.send(g)}}})(global);
(function(e){var f=function(){return Math.floor(65536*Math.random()).toString(16)};e.Appacitive.GUID=function(){var c=f()+f()+"-"+f()+"-"+f()+"-"+f()+"-"+f()+f()+f(),a="",b,d,e,h,k,g,m=0,c=c.replace(/\r\n/g,"\n");d="";for(e=0;e<c.length;e++)h=c.charCodeAt(e),128>h?d+=String.fromCharCode(h):(127<h&&2048>h?d+=String.fromCharCode(h>>6|192):(d+=String.fromCharCode(h>>12|224),d+=String.fromCharCode(h>>6&63|128)),d+=String.fromCharCode(h&63|128));for(c=d;m<c.length;)b=c.charCodeAt(m++),d=c.charCodeAt(m++),
e=c.charCodeAt(m++),h=b>>2,b=(b&3)<<4|d>>4,k=(d&15)<<2|e>>6,g=e&63,isNaN(d)?k=g=64:isNaN(e)&&(g=64),a=a+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(h)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(b)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(k)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(g);return a.toString()}})(global);
(function(e){e.Appacitive.ArticleCollection=function(f){var c=null,a=null,b=[],d=f;this.collectionType="article";if(!f||!f.schema)throw Error("Must provide schema while initializing ArticleCollection.");var j=this,h=function(b){c=b.schema;b.type="article";a=new e.Appacitive.queries.SearchAllQuery(b);j.extendOptions=a.extendOptions;d=b};this.setFilter=function(b){d.filter=b;d.type="article";d.schema=c;a=new e.Appacitive.queries.BasicFilterQuery(f)};this.reset=function(){c=d=null;b.length=0;a=null};
this.getQuery=function(){return a};this.setOptions=h;h(f);this.get=function(a){if(a!=parseInt(a,10))return null;a=parseInt(a,10);return"number"!=typeof a||a>=b.length?null:b.slice(a,a+1)[0]};this.addToCollection=function(a){if(!a||a.get("__schematype")!=c)throw Error("Null article passed or schema type mismatch");var d=null;b.forEach(function(b,c){b.get("__id")==a.get("__id")&&(d=c)});0!=d?b.splice(d,1):b.push(a)};this.getArticle=function(a,c,d){c=c||function(){};d=d||function(){};var e=b.filter(function(b){return b.get("__id")==
a});1==e.length?c(Array.prototype.slice.call(e)[0]):d()};this.getAll=function(){return Array.prototype.slice.call(b)};this.removeById=function(a){if(!a)return!1;var c=null;b.forEach(function(b,d){b.getArticle().__id&&b.getArticle().__id==a&&(c=d)});return null!==c?(b.splice(c,1),!0):!1};this.removeByCId=function(a){if(!a)return!1;var c=null;b.forEach(function(b,d){b.__cid&&b.__cid==a&&(c=d)});return null!==c?(b.splice(c,1),!0):!1};this.fetch=function(c,d){c=c||function(){};d=d||function(){};b.length=
0;var f=a.toRequest();f.onSuccess=function(a){var f=c;if(a=a.articles){if(!a.length||0===a.length)a=[];a.forEach(function(a){a=new e.Appacitive.Article(a);a.___collection=j;b.push(a)});f()}else d()};e.Appacitive.http.send(f)};this.createNewArticle=function(a){a=a||{};a.__schematype=c;a=new e.Appacitive.Article(a);a.___collection=j;a.__cid=parseInt(1E6*Math.random(),10);b.push(a);return a};this.map=function(){return b.map.apply(this,arguments)};this.forEach=function(){return b.forEach.apply(this,arguments)};
this.filter=function(){return b.filter.apply(this,arguments)}}})(global);
(function(e){e.Appacitive.ConnectionCollection=function(f){var c=null,a=null,b=[],d=[],j=f;this.collectionType="connection";if(!f||!f.relation)throw Error("Must provide relation while initializing ConnectionCollection.");var h=function(b){c=b.relation;b.type="connection";a=new e.Appacitive.queries.SearchAllQuery(b);j=b};this.setFilter=function(b){j.filter=b;j.type="connection";j.relation=c;a=new e.Appacitive.queries.BasicFilterQuery(f)};this.setQuery=function(c){if(!c)throw Error("Invalid query passed to connectionCollection");
b.length=0;a=c};this.reset=function(){c=j=null;articles.length=0;b.length=0;a=null};this.getQuery=function(){return a};this.setOptions=h;h(f);this.get=function(a){if(a!=parseInt(a,10))return null;a=parseInt(a,10);return"number"!=typeof a||a>=b.length?null:b.slice(a,a+1)[0]};this.addToCollection=function(a){if(!a||a.get("__relationtype")!=c)throw Error("Null connection passed or relation type mismatch");var d=null;b.forEach(function(b,c){b.get("__id")==a.get("__id")&&(d=c)});null!==d?b.splice(d,1):
b.push(a)};this.getConnection=function(a,c,d){c=c||function(){};d=d||function(){};var e=b.filter(function(b){return b.get("__id")==a});1==e.length?c(Array.prototype.slice.call(e)[0]):d()};this.getAll=function(){return Array.prototype.slice.call(b)};this.removeById=function(a){if(!a)return!1;var c=null;b.forEach(function(b,d){b.getConnection().__id&&b.getConnection().__id==a&&(c=d)});return null!==c?(b.splice(c,1),!0):!1};this.removeByCId=function(a){if(!a)return!1;var c=null;b.forEach(function(b,
d){b.__cid&&b.__cid==a&&(c=d)});return null!==c?(b.splice(c,1),!0):!1};var k=this;this.getConnectedArticle=function(a){if(!d||0===d.length)return null;var b=d.filter(function(b){return b.get("__id")==a});return 0<b.length?b[0]:null};this.fetch=function(c,f){c=c||function(){};f=f||function(){};b.length=0;var j=a.toRequest();j.onSuccess=function(a){a:{var j=c;a=a||{};var h=a.connections;if(!h)if(a.status&&a.status.code&&"200"==a.status.code)h=[];else{f();break a}if(!h.length||0===h.length)h=[];h.forEach(function(a){var c=
new e.Appacitive.Connection(a);c.___collection=k;b.push(c);if(a.__endpointa.article||a.__endpointb.article)a=new e.Appacitive.Article(a.__endpointa.article||a.__endpointb.article),a.___collection=k,d.push(a)});j()}};e.Appacitive.http.send(j)};this.createNewConnection=function(a){a=a||{};a.__relationtype=c;a=new e.Appacitive.Connection(a);a.___collection=k;a.__cid=parseInt(1E6*Math.random(),10);b.push(a);return a};this.map=function(){return b.map.apply(this,arguments)};this.forEach=function(a,c){return b.forEach(a,
c||this)};this.filter=function(){return b.filter.apply(this,arguments)}}})(global);
(function(e){var f=function(c,a){var b=new e.Appacitive.HttpRequest;b.method="get";b.url=e.Appacitive.config.apiBaseUrl+e.Appacitive.storage.urlFactory.user.getGetAllLinkedAccountsUrl(this.get("__id"));b.onSuccess=function(b){var e=null;b&&(b.identities&&0<b.identities.length)&&(b=b.identities.filter(function(a){return"facebook"==a.authtype.toLowerCase()}),1==b.length&&(e=b[0].username));null!==e?FB.api("/"+e,function(b){b?c(b):a()}):a()};b.onError=function(){a()};e.Appacitive.http.send(b)};e.Appacitive.Article=
function(c){c=new Appacitive.BaseObject(c);c.type="article";c.connectionCollections=[];c.get("__schematype")&&"user"==c.get("__schematype").toLowerCase()&&(c.getFacebookProfile=f);return c};e.Appacitive.BaseObject.prototype.getConnectedArticles=function(c){if("article"!=this.type)return null;c=c||{};c.articleId=this.get("__id");var a=new e.Appacitive.ConnectionCollection({relation:c.relation});a.connectedArticle=this;this.connectionCollections.push(a);c=new e.Appacitive.queries.ConnectedArticlesQuery(c);
a.setQuery(c);return a};e.Appacitive.BaseObject.prototype.getConnected=function(c){if("article"!=this.type)return null;c=c||{};c.onSuccess=c.onSuccess||function(){};c.onError=c.onError||function(){};c.articleId=this.get("__id")}})(global);
(function(e){var f=function(c){var a={label:c.label};if(c.articleid)a.articleid=c.articleid;else if(c.article&&"function"==typeof c.article.getArticle)c.article.get("__id")?a.articleid=c.article.get("__id"):a.article=c.article.getArticle();else if("object"==typeof c.article&&c.article.__schematype)c.article.__id?a.articleid=c.article.__id:a.article=c.article;else throw Error("Incorrectly configured endpoints provided to setupConnection");return a};e.Appacitive.Connection=function(c){var a=new Appacitive.BaseObject(c);
a.type="connection";a.getConnection=a.getArticle;a.__defineGetter__("connectedArticle",function(){if(!a.___collection.connectedArticle)throw Error("connectedArticle can be accessed only by using the getConnectedArticles call");var b=a.___collection.connectedArticle.get("__id");if(!b)return null;var c=a.getConnection().__endpointa.articleid;a.getConnection().__endpointa.articleid==b&&(c=a.getConnection().__endpointb.articleid);return a.___collection.getConnectedArticle(c)});a.setupConnection=function(b,
c){if(!b||!b.id||b.label||!c||!c.id||c.label)throw Error("Incorrect endpoints configuration passed.");a.set("__endpointa",f(b));a.set("__endpointb",f(c))};return a}})(global);
(function(e){e.Appacitive.Users=new function(){var f=null;this.__defineGetter__("currentUser",function(){return f});this.deleteCurrentUser=function(c,a){if(null===f)throw Error("Current user is not set yet");this.deleteUser(f.__id,c||function(){},a||function(){})};this.deleteUser=function(c,a,b){a=a||function(){};b=b||function(){};var d=new e.Appacitive.HttpRequest;d.method="delete";d.url=e.Appacitive.config.apiBaseUrl;d.url+=e.Appacitive.storage.urlFactory.user.getUserDeleteUrl(c);d.onSuccess=function(c){c&&
c.code&&"200"==c.code?a(c):(c=c||{},c.message=c.message||"Server error",b(c))};d.onError=b;e.Appacitive.http.send(d)};this.createUser=function(c,a,b){var d=(new Appacitive.ArticleCollection({schema:"user"})).createNewArticle(c);d.save(function(){a(d)},b)};this.createUser1=function(c,a,b){a=a||function(){};b=b||function(){};c=c||{};c.__schematype="user";if(!c.username||!c.password)throw Error("Username and password are mandatory");var d=new e.Appacitive.HttpRequest;d.method="put";d.url=e.Appacitive.config.apiBaseUrl+
e.Appacitive.storage.urlFactory.user.getCreateUserUrl();d.data=c;d.onSuccess=function(c){c&&c.user?a(c.user):b((c||{}).status||"No response from APIs.")};d.onError=b;e.Appacitive.http.send(d)};this.authenticateUser=function(c,a,b){a=a||function(){};b=b||function(){};var d=new e.Appacitive.HttpRequest;d.method="post";d.url=e.Appacitive.config.apiBaseUrl+e.Appacitive.storage.urlFactory.user.getAuthenticateUserUrl();d.data=c;d.onSuccess=function(c){c&&c.user?(f=c.user,a(c)):(c=c||{},b(c.status))};d.onError=
b;e.Appacitive.http.send(d)};this.authenticateWithFacebook=this.signupWithFacebook=function(c,a){c=c||function(){};a=a||function(){};FB.api("/me",function(){var b={accesstoken:Appacitive.facebook.accessToken,type:"facebook",expiry:3600,attempts:-1,createnew:!0},d=new Appacitive.HttpRequest;d.url=Appacitive.config.apiBaseUrl+Appacitive.storage.urlFactory.user.getAuthenticateUserUrl();d.method="post";d.data=b;d.onSuccess=function(b){b.user?(f=b.user,c(b)):a(b)};d.onError=function(){a()};Appacitive.http.send(d)})}}})(global);
(function(e){e.Appacitive.email=new function(){var f={username:null,from:null,frompassword:null,smtphost:"smtp.google.com",smtpport:587,enablessl:!0,replyto:null};this.getConfig=function(){return f};this.sendTemplatedEmail=function(){throw Error("Not implemented yet");};this.setupEmail=function(c){c=c||{};f.username=c.username||f.username;f.from=c.from||f.from;f.frompassword=c.frompassword||f.frompassword;f.smtphost=c.smtphost||f.smtphost;f.smtpport=c.smtpport||f.smtpport;f.enablessl=c.enablessl||
f.enablessl;f.replyto=c.replyto||f.replyto};this.sendRawEmail=function(c,a,b){a=a||function(){};b=b||function(){};if(!c||!c.to||!c.to.length||1!=c.to.length)throw Error("Atleast one receipient is mandatory to send an email");if(!c.subject)throw Error("Subject is mandatory to send an email");c={configuration:f,to:c.to||[],cc:c.cc||[],bcc:c.bcc||[],subject:c.subject||"Appacitive",body:{BodyText:c.body||"",IsBodyHTML:!0,__type:"RawBody"}};var d=new e.Appacitive.HttpRequest;d.url=e.Appacitive.config.apiBaseUrl+
Appacitive.storage.urlFactory.email.getSendEmailUrl();d.method="post";d.data=c;d.onSuccess=function(c){c&&c.status&&"200"==c.status.code?a(c.email):(c=c||{},c.status=c.status||{},b(c.status.message||"Server error"))};e.Appacitive.http.send(d)}}})(global);
(function(e){e.Appacitive.facebook=new function(){var e=null;this.requestLogin=function(c,a){c=c||function(){};a=a||function(){};FB?FB.login(function(b){b.authResponse?(e=b.authResponse.accessToken,c(b.authResponse)):a()},{scope:"email,user_birthday"}):a()};this.getCurrentUserInfo=function(c,a){c=c||function(){};a=a||function(){};FB.api("/me",function(b){b?c(b):a()})};this.__defineGetter__("accessToken",function(){return e});this.__defineSetter__("accessToken",function(c){e=c});this.getProfilePictureUrl=
function(c){return"https://graph.facebook.com/"+c+"/picture"};this.logout=function(c,a){c=c||function(){};a=a||function(){};try{FB.logout(function(){c()})}catch(b){a(b.message)}}}})(global);"undefined"!=typeof module&&(module.exports.Appacitive=global.Appacitive);